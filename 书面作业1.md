# 习题1-1（50分）
## 答：
### （1）  
![](1.jpg)
### （2）
![](2.jpg)
### （3）主要因素包括：
- 不确定性最大的是转发设备中的排队延时
- 转发设备中的处理时间：路由决策、差错检验、分片等操作
- 分组大小与分组数量、数据流的个数、数据流占带宽的频率
- 链路传输速率与链路长度

# 习题1-2（50分）

通过Windows命令行模式下的nslookup命令查询www.163.com，同时打开Wireshark软件捕获上述nslookup相关的DNS报文。

请回答以下3个问题：

（1）提供nslookup查询结果截图，并对查询结果进行全面分析（20分）  
（2）提供Wireshark捕获结果截图（仅过滤出DNS报文），并说明每条DNS报文的用途（20分）  
（3）提供某个DNS报文详细信息截图，说明DNS服务使用哪种传输层协议，以及哪些措施可提高DNS服务可靠性（10分）  

## 答：
### （1）  
截图如下：

![](1.png)

分析：
- 查询的域名：www.163.com。
- 查询的 DNS 服务器：41.45.30.222.in-addr.arpa，IP 地址为 222.30.45.41。
这表明查询使用了本地配置的 DNS 服务器。
- 非权威应答：
  - 结果包含多个 IP 地址，说明 www.163.com 使用了 多地址解析，以实现负载均衡和高可用性。
  - 包含了 IPv6 和 IPv4 地址：
  - IPv6 地址：
    - 240e:904:800:2801:3::2f
    - 240e:904:800:2801:3::30
    - 240e:904:800:2800:3::3ec
    - 240e:904:800:2800:3::3eb
  - IPv4 地址：
    - 211.100.8.110
    - 211.100.8.107
    - ...

- 显示别名（CNAME）解析：
   - Aliases: 
      - www.163.com
      - www.163.com.163jiasu.com
   - 说明 www.163.com 被重定向到加速域名 www.163.com.163jiasu.com，可能与内容分发网络（CDN）优化有关。

### （2）
截图如下：

![](2.png)

用途： 
- 第一条报文
  - 由主机 10.130.85.186 发起，向 DNS 服务器 222.30.45.41 请求 mcs-bd.feishu.cn 的 IPv6 地址（AAAA 记录）
  - 获取目标域名在 IPv6 网络中的可用地址，用于支持 IPv6 网络访问
- 第二条报文
  - 由主机向 DNS 服务器请求 mcs-bd.feishu.cn 的 IPv4 地址（A 记录）
  - 获取目标域名在 IPv4 网络中的可用地址，用于支持传统网络访问
- 第三条报文
  - 由主机向 DNS 服务器请求 mcs-bd.feishu.cn 的 HTTPS 记录
  - 获取与目标域名安全通信相关的信息（如证书或加密设置）
- 第四条报文
  - 由 DNS 服务器响应，提供 mcs-bd.feishu.cn 的 IPv6 地址，并返回 CNAME（别名）信息
  - 将目标域名解析为其别名及 IPv6 地址，支持 IPv6 通信
- 第五条报文
  - 由 DNS 服务器响应，提供 mcs-bd.feishu.cn 的 IPv4 地址，并返回 CNAME（别名）信息
  - 将目标域名解析为其别名及 IPv4 地址，支持 IPv4 通信
- 第六条报文
  - 由 DNS 服务器响应，提供 mcs-bd.feishu.cn 的 HTTPS 相关记录，并返回 CNAME（别名）信息
  - 将目标域名解析为其别名，并提供安全通信（HTTPS）的必要信息
### （3）
某个DNS报文详细信息截图如下：
![](3.png)

从截图中可以看出，DNS服务使用的是TCP协议（Transmission Control Protocol）。

措施：
- 使用TCP进行重传
- 启用DNSSEC可以增加DNS查询的安全性，防止DNS欺骗和缓存投毒等攻击
- 使用负载均衡机制，可以将DNS请求分配给不同的服务器
- TCP Keep-Alive机制，确保连接保持活跃并及时发现连接的故障
